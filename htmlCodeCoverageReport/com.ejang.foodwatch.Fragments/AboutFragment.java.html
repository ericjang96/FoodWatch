<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AboutFragment.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">app</a> &gt; <a href="index.source.html" class="el_package">com.ejang.foodwatch.Fragments</a> &gt; <span class="el_source">AboutFragment.java</span></div><h1>AboutFragment.java</h1><pre class="source lang-java linenums">package com.ejang.foodwatch.Fragments;

import android.app.Fragment;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.content.Context;
import android.os.Bundle;
import android.support.v7.app.AlertDialog;
import android.text.Html;
import android.text.method.LinkMovementMethod;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView;
import android.widget.LinearLayout;
import android.widget.TextView;

import com.ejang.foodwatch.Activities.BaseActivity;
import com.ejang.foodwatch.R;

/**
 * Created by eric_ on 2017-08-03.
 */

<span class="fc" id="L25">public class AboutFragment extends Fragment {</span>
    BaseActivity mActivity;

    @Override
    public void onAttach(Context activity) {
<span class="fc" id="L30">        super.onAttach(activity);</span>
<span class="pc bpc" id="L31" title="1 of 2 branches missed.">        if (activity instanceof BaseActivity)</span>
        {
<span class="fc" id="L33">            mActivity = (BaseActivity) activity;</span>
        }
<span class="fc" id="L35">    }</span>

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
<span class="fc" id="L41">        LinearLayout aboutLayout = (LinearLayout) inflater.inflate(R.layout.content_about, container, false);</span>

        // Set the main text for this page
<span class="fc" id="L44">        TextView aboutBlurb = (TextView) aboutLayout.findViewById(R.id.about_blurb);</span>
<span class="fc" id="L45">        aboutBlurb.setMovementMethod(LinkMovementMethod.getInstance());</span>
<span class="pc bpc" id="L46" title="1 of 2 branches missed.">        if (android.os.Build.VERSION.SDK_INT &lt;= android.os.Build.VERSION_CODES.M)</span>
        {
<span class="nc" id="L48">            aboutBlurb.setText(Html.fromHtml(getString(R.string.about_blurb_text)));</span>
        }
        else
        {
<span class="fc" id="L52">            String s = getString(R.string.about_blurb_text);</span>
<span class="fc" id="L53">            System.err.println(s);</span>
<span class="fc" id="L54">            aboutBlurb.setText(Html.fromHtml(getString(R.string.about_blurb_text), Html.FROM_HTML_MODE_LEGACY));</span>
        }

        // Bring up an alert dialog with a list of open source licenses when button is clicked
<span class="fc" id="L58">        LinearLayout openSourceInfo = (LinearLayout) aboutLayout.findViewById(R.id.about_license);</span>
<span class="fc" id="L59">        openSourceInfo.setOnClickListener(new View.OnClickListener() {</span>
            @Override
            public void onClick(View v) {
<span class="fc" id="L62">                displayLicensesAlertDialog();</span>
<span class="fc" id="L63">            }</span>
        });

        // Replace current fragment with a new fragment with disclaimer info when button is clicked
<span class="fc" id="L67">        LinearLayout disclaimer = (LinearLayout) aboutLayout.findViewById(R.id.about_disclaimer);</span>
<span class="fc" id="L68">        disclaimer.setOnClickListener(new View.OnClickListener() {</span>
            @Override
            public void onClick(View v) {
<span class="nc" id="L71">                mActivity.getSupportActionBar().setTitle(&quot;Disclaimer&quot;);</span>
<span class="nc" id="L72">                FragmentManager manager = getFragmentManager();</span>
<span class="nc" id="L73">                FragmentTransaction transaction = manager.beginTransaction();</span>
<span class="nc" id="L74">                transaction.replace(R.id.container_about, new DisclaimerFragment());</span>
<span class="nc" id="L75">                transaction.addToBackStack(null);</span>
<span class="nc" id="L76">                transaction.commit();</span>
<span class="nc" id="L77">            }</span>
        });

        // Replace current fragment with a new fragment with privacy policy info when button is clicked
<span class="fc" id="L81">        LinearLayout privacyPolicy = (LinearLayout) aboutLayout.findViewById(R.id.about_privacy_policy);</span>
<span class="fc" id="L82">        privacyPolicy.setOnClickListener(new View.OnClickListener() {</span>
            @Override
            public void onClick(View v) {
<span class="nc" id="L85">                mActivity.getSupportActionBar().setTitle(&quot;Privacy Policy&quot;);</span>
<span class="nc" id="L86">                FragmentManager manager = getFragmentManager();</span>
<span class="nc" id="L87">                FragmentTransaction transaction = manager.beginTransaction();</span>
<span class="nc" id="L88">                transaction.replace(R.id.container_about, new PrivacyPolicyFragment());</span>
<span class="nc" id="L89">                transaction.addToBackStack(null);</span>
<span class="nc" id="L90">                transaction.commit();</span>
<span class="nc" id="L91">            }</span>
        });

<span class="fc" id="L94">        return aboutLayout;</span>
    }

    private void displayLicensesAlertDialog() {
<span class="fc" id="L98">        WebView view = (WebView) LayoutInflater.from(getActivity()).inflate(R.layout.dialog_licenses, null);</span>
<span class="fc" id="L99">        view.loadUrl(&quot;file:///android_asset/open_source_licenses.html&quot;);</span>
<span class="fc" id="L100">        AlertDialog dialog = new AlertDialog.Builder(getActivity(), R.style.Theme_AppCompat_Light_Dialog_Alert)</span>
<span class="fc" id="L101">                .setTitle(&quot;Open Source Licenses&quot;)</span>
<span class="fc" id="L102">                .setView(view)</span>
<span class="fc" id="L103">                .setPositiveButton(android.R.string.ok, null)</span>
<span class="fc" id="L104">                .show();</span>
<span class="fc" id="L105">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>